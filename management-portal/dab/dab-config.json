{
  "$schema": "https://dataapibuilder.azureedge.net/schemas/latest/dab.draft.schema.json",
  "data-source": {
    "database-type": "cosmosdb_nosql",
    "options": {
      "database": "stamps-control-plane",
      "schema": "schema.graphql"
    },
    "connection-string": "@env('COSMOS_CONNECTION_STRING')"
  },
  "runtime": {
    "rest": { 
      "enabled": true, 
      "path": "/api" 
    },
    "graphql": { 
      "enabled": true, 
      "path": "/graphql"
    },
    "authentication": { 
      "provider": "StaticWebApps" 
    }
  },
  "entities": {
    "Tenant": {
      "source": "tenants",
      "graphql": { "type": { "singular": "Tenant", "plural": "Tenants" } },
      "primary-key": ["id", "tenantId"],
      "permissions": [ { "role": "anonymous", "actions": [ "read" ] } ]
    },
    "Cell": {
      "source": "cells",
      "graphql": { "type": { "singular": "Cell", "plural": "Cells" } },
      "primary-key": ["id", "cellId"],
      "permissions": [ { "role": "anonymous", "actions": [ "read" ] } ]
    },
    "Operation": {
      "source": "operations",
      "graphql": { "type": { "singular": "Operation", "plural": "Operations" } },
      "primary-key": ["id", "tenantId"],
      "permissions": [ { "role": "anonymous", "actions": [ "read" ] } ]
    }
  }
}
